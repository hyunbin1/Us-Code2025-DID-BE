{
  "openapi": "3.0.1",
  "info": {
    "title": "AI Gemini API",
    "version": "v1.0.0",
    "description": "Gemini 기반 텍스트 생성 기능을 제공하는 AI API입니다. 사용자가 질문을 입력하면, Google Gemini 모델을 통해 자연어로 답변을 생성합니다."
  },
  "servers": [
    {
      "url": "http://104.197.55.199:8080/api/v1"
    }
  ],
  "tags": [
    {
      "name": "AI-Gemini",
      "description": "Google Gemini 기반 텍스트 생성 API"
    },
    {
      "name": "Email",
      "description": "Email 관련 API"
    },
    {
      "name": "Naver Blog",
      "description": "네이버 블로그 자동화 관련 API"
    }
  ],
  "paths": {
    "/naver-blog/plans ": {
      "post": {
        "tags": ["Naver Blog"],
        "summary": "블로그 글 계획을 작성하는 API 입니다. 이는 저장 기능이 존재하지 않습니다 save api를 이용해주세요.",
        "description": "Gemini API를 활용하여 사용자의 입력을 바탕으로 블로그 제목과 요약(계획)을 생성합니다.",
        "requestBody": {
          "description": "블로그 계획 생성을 위한 정보",
          "required": true,
          "content": {
            "application/json": {
              "schema": {
              },
              "example": {
                "contentsType": "상품 홍보",
                "count": 4,
                "item": "의성마늘",
                "type": "NAVER_BLOG",
                "keywords": ["의성", "마늘", "생산량"]
              }
            }
          }
        },
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "생성된 블로그 계획 리스트",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                  }
                },
                "example": [
                  {
                    "contentTitle": "MJS 농부의 땀과 정성이 담긴 명품 의성마늘 이야기",
                    "plans": [
                      {
                        "title": "농부 MJS가 직접 전하는 올해 의성마늘 생산량과 작황 이야기",
                        "summary": "한 해 동안 정성껏 키운 의성마늘 수확을 마쳤습니다 올해 마늘 농사의 전반적인 과정과 최종 생산량에 대한 이야기를 진솔하게 풀어냅니다"
                      },
                      {
                        "title": "의성마늘 생산량 1등 공신은 바로 의성의 땅입니다",
                        "summary": "왜 의성마늘이 유명할까요 의성의 특별한 토양과 기후가 마늘의 맛과 품질에 어떤 영향을 미치는지 농부가 직접 설명해 드립니다"
                      },
                      {
                        "title": "MJS 농가의 의성마늘 연간 생산량, 어떻게 결정될까요",
                        "summary": "씨앗 파종부터 수확까지 의성마늘의 한 해 생산량이 결정되는 과정을 사진과 함께 생생하게 보여드립니다 농부의 땀과 노력을 느껴보세요"
                      },
                      {
                        "title": "올해 의성마늘 생산량이 한정적입니다 서두르세요",
                        "summary": "정직하게 키워낸 올해 MJS 농가 의성마늘의 총 생산량을 공개합니다 믿고 드실 수 있는 고품질 마늘을 한정된 수량으로 판매 시작합니다"
                      },
                      {
                        "title": "우리 집 의성마늘 자랑 좀 할까요 단단함과 풍미가 다릅니다",
                        "summary": "높은 생산량 속에서도 최상급 품질을 자랑하는 MJS 농가 마늘의 특징을 알려드립니다 좋은 의성마늘 고르는 꿀팁도 놓치지 마세요"
                      }
                    ]
                  }
                ]
              }
            }
          },
          "401": {
            "description": "인증 실패"
          },
          "500": {
            "description": "서버 오류"
          }
        }
      },
      "get": {
        "tags": ["Naver Blog"],
        "summary": "내 블로그 계획 전체 조회",
        "description": "현재 로그인한 사용자가 생성한 모든 블로그 글 계획(제목, 요약, 상태 등)을 조회합니다.",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "블로그 계획 조회 성공",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                  }
                },
                "example":
                [
                  {
                    "contentsType": "상품 홍보",
                    "title": "MJS농부입니다 의성 흙내음 가득한 마늘밭을 소개합니다",
                    "summary": "한평생 의성에서 마늘 농사만 지어온 MJS농부입니다. 올해도 어김없이 알이 굵은 마늘을 수확하기 위해 땀 흘리는 저희 밭의 생생한 소식을 전합니다. 의성마늘이 왜 특별한지 그 첫 번째 이야기를 시작합니다.\n\nconceptTitle: 일 년의 기다림, 2024년 햇마늘 수확 현장",
                    "conceptTitle": "MJS 농가의 자부심, 의성 땅이 품은 마늘",
                    "status": "PENDING",
                    "ver": 1
                  },
                  {
                    "contentsType": "상품 홍보",
                    "title": "드디어 시작된 의성마늘 수확 올해 생산량 살짝 공개합니다",
                    "summary": "기다리고 기다리던 의성마늘 수확이 시작되었습니다. 올해는 유난히 날이 좋아 마늘대가 튼실합니다. MJS농가의 올해 예상 생산량을 살짝 귀띔해드리며 정성껏 키운 마늘이 어떻게 수확되는지 현장을 보여드립니다.\n\nconceptTitle: MJS농가 생산량 공개 및 정식 판매 시작",
                    "conceptTitle": "MJS 농가의 자부심, 의성 땅이 품은 마늘",
                    "status": "PENDING",
                    "ver": 1
                  },
                  {
                    "contentsType": "상품 홍보",
                    "title": "2024년산 의성마늘 총 생산량과 가격을 알려드립니다",
                    "summary": "올해 MJS농가에서 수확한 의성마늘의 총 생산량을 투명하게 공개하고 정식 판매를 시작합니다. 생산량이 한정되어 있으니 좋은 마늘을 선점하고 싶다면 서둘러주세요. 저희 농가의 자부심을 보내드립니다.\n\nconceptTitle: 의성마늘 100% 활용법과 보관 노하우",
                    "conceptTitle": "MJS 농가의 자부심, 의성 땅이 품은 마늘",
                    "status": "PENDING",
                    "ver": 1
                  },
                  {
                    "contentsType": "상품 홍보",
                    "title": "MJS농부가 알려주는 의성마늘 오래 맛있게 먹는 법",
                    "summary": "저희 의성마늘을 구매해주셔서 감사합니다. 단단하고 맛 좋은 마늘을 오랫동안 신선하게 보관하는 방법과 마늘 장아찌 황금 레시피를 공유합니다. 의성의 맛과 향을 식탁에서 오래도록 즐겨보세요.",
                    "conceptTitle": "MJS 농가의 자부심, 의성 땅이 품은 마늘",
                    "status": "PENDING",
                    "ver": 1
                  }
                ]
              }
            }
          },
          "401": {
            "description": "인증 실패"
          }
        }
      }
    },
    "/naver-blog/plans/save": {
      "post": {
        "tags": ["Naver Blog"],
        "summary": "작성된 블로그 글 계획을 저장하는 API 입니다. 이는 3개 이상의 ver부터 더 이상 저장할 수 없습니다.",
        "description": "Gemini API를 활용하여 사용자의 입력을 바탕으로 블로그 제목과 요약(계획)을 생성합니다.",
        "requestBody": {
          "description": "블로그 계획 생성을 위한 정보",
          "required": true,
          "content": {
            "application/json": {
              "schema": {
              },
              "example": {
                "conceptTitle": "의성마늘 리얼 성장기",
                "item": "의성마늘",
                "contentsType": "상품홍보",
                "keywords": ["수확", "보관법", "풍년"],
                "type": "NAVER_BLOG",
                "plans": [
                  {
                    "title": "농부 MJS가 전하는 진짜 의성마늘 이야기",
                    "summary": "대한민국 대표 마늘 의성마늘은 무엇이 다를까요 의성 토박이 농부 MJS가 직접 자부심을 가지고 키우는 마늘의 특징과 의성 땅의 비밀을 알려드립니다"
                  },
                  {
                    "title": "올해 의성마늘 생산량 대공개 밭에서 식탁까지의 여정",
                    "summary": "땀과 정성으로 키운 2024년 햇 의성마늘 생산 과정을 소개합니다 씨앗 파종부터 수확 건조까지 전 과정을 투명하게 보여드리며 올해 생산량 소식도 함께 전합니다"
                  },
                  {
                    "title": "제가 키운 의성마늘 오래 두고 먹는 비법",
                    "summary": "큰 맘 먹고 구매한 의성마늘 어떻게 보관해야 할지 막막하셨죠 농부가 직접 알려주는 신선함을 유지하는 저장 방법과 꿀팁을 배워보세요"
                  },
                  {
                    "title": "의성 마늘밭과 함께하는 농부 MJS의 하루",
                    "summary": "새벽이슬을 맞으며 시작하는 마늘 농부의 하루는 어떨까요 밭을 돌보고 마늘의 성장을 확인하는 저 MJS의 소박하지만 보람찬 일상을 공유합니다"
                  },
                  {
                    "title": "드디어 시작합니다 MJS 농가 의성마늘 연간 생산량 한정 판매",
                    "summary": "일 년 내내 정성껏 키운 최고 품질의 의성마늘을 드디어 선보입니다 저희 농가의 한정된 연간 생산량으로 조기 마감이 예상되오니 서둘러 주문해주세요"
                  }
                ]
              }
            }
          }
        },
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "생성된 블로그 계획 리스트",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                  }
                },
                "example": [
                  {
                    "status": "API 요청 성공",
                    "data": "성공적으로 저장 되었습니다.",
                    "timestamp": "2025-06-28T19:59:00.24188"
                  }
                ]
              }
            }
          },
          "401": {
            "description": "인증 실패"
          },
          "500": {
            "description": "서버 오류"
          }
        }
      }
    },
    "/naver-blog": {
      "post": {
        "tags": ["Naver Blog"],
        "summary": "네이버 블로그 자동 작성",
        "description": "사용자가 입력한 정보를 바탕으로 Gemini API를 통해 네이버 블로그 형식의 글을 생성합니다.",
        "requestBody": {
          "description": "블로그 생성을 위한 주제 및 추가 정보",
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ClientNaverBlogRequestDTO"
              },
              "example": {
                "contentsType": "상품 홍보",
                "extraPrompt": "의성 마늘이 건강에 그렇게 좋대",
                "item" : "의성마늘"
              }
            }
          }
        },
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "블로그 글 작성 성공",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/GeminiResponse"
                },
                "example": {
                  "candidates": [
                    {
                      "content": {
                        "parts": [
                          {
                            "text": "[의성 농부 MJS] 2024년 명품 의성 햇마늘, 드디어 판매 시작합니다! (산지직송/농가직거래) 안녕하세요. 살리 좋은 고장, 경북 의성에서 땀으로 마늘 농사짓는 농부 MJS입니다. 길고 뜨거웠던 여름의 문턱에서, 드디어 우리 이웃님들께 반가운 소식을 전하게 되었습니다. 지난 가을, 제 손으로 한 쪽 한 쪽 정성껏 심었던 마늘들이 드디어 황금빛 결실을 맺었습니다. 1년 가까운 시간 동안 오직 이 순간만을 기다리며 애지중지 키워낸 2024년 명품 의성 햇마늘, 오늘부터 정식으로 판매를 시작합니다. (활짝 웃으며 갓 수확한 마늘 한 단을 들고 있는 농부 MJS의 사진) 저희 밭이 있는 의성은 다들 아시다시피 마늘 농사에 있어 천혜의 땅입니다. 물 빠짐이 좋은 황토흙과 큰 일교차는 마늘의 육질을 단단하고 야물게 만들고, 그 독특한 알싸한 향과 맛을 더욱 깊게 해줍니다. 올해도 어김없이 자연은 정직한 농부의 땀을 외면하지 않았습니다. 봄에는 가뭄 걱정에 밤잠을 설쳤고, 여름 문턱에서는 때 이른 장맛비에 혹여나 마늘이 물러지진 않을까 마음을 졸였습니다. 하지만 하늘의 도움과 제 정성이 더해져, 올해도 어김없이 알이 꽉 차고 단단한 최상품의 마늘을 수확할 수 있었습니다. (의성 황토밭에 끝없이 펼쳐진 푸른 마늘밭 전경 사진) 저희 MJS 농가의 마늘은 그냥 마늘이 아닙니다. 제 자식과도 같은 존재입니다. 수확 후에는 바로 판매하는 것이 아니라, 의성의 상쾌한 자연 바람이 잘 통하는 건조장에서 약 한 달간 공들여 후숙 및 건조 과정을 거칩니다. 이 과정을 통해 마늘의 저장성은 최고조에 달하고, 매운맛과 단맛의 조화가 완벽해집니다. 반질반질 윤기가 흐르는 표면을 보십시오. 겉껍질을 한 겹 벗겨내면 뽀얗고 통통한 속살이 드러나는데, 그 향기만으로도 군침이 돕니다. 이게 바로 진짜 의성마늘의 위엄입니다. (통풍이 잘되는 창고에 가득 매달려 건조되고 있는 마늘 다발 사진) 우리 이웃님들, 마트에서 보는 마늘과 산지에서 바로 보내드리는 마늘은 그 신선도와 풍미부터가 다릅니다. 제가 직접 키우고, 수확하고, 선별해서 보내드리는 마늘은 중간 유통 과정이 없어 신선함은 물론이고 가격 거품까지 뺐습니다. 농부의 양심과 자존심을 걸고, 가장 좋은 마늘만을 골라 보내드릴 것을 약속합니다. 올해 김장 준비, 저희 MJS 농가 의성마늘과 함께라면 그 맛과 깊이가 달라질 겁니다. 든든한 1년 양식, 지금 바로 준비하세요. **<MJS 농가 2024년 명품 의성마늘 상품 안내>** 저희 마늘은 크기와 품질에 따라 특품/상품/중품으로 나뉘며, 용도에 맞게 선택하실 수 있도록 통마늘과 깐마늘 두 종류로 준비했습니다. 1. **통마늘 (저장용/김장용 추천)**: 의성의 깨끗한 바람에 잘 말려 저장성이 뛰어납니다. 김장철까지 든든하게 보관하실 수 있습니다. (크기 비교를 위해 손 위에 올려놓은 특/상/중 사이즈의 통마늘 사진) *   **특품 통마늘 (1접=100개):** 65,000원 (알이 굵고 단단해 선물용으로도 손색이 없습니다.) *   **상품 통마늘 (1접=100개):** 55,000원 (가정에서 김장용, 양념용으로 사용하기 가장 좋습니다. 가성비 최고!) *   **중품 통마늘 (1접=100개):** 45,000원 (알은 조금 작지만 맛과 향은 그대로! 흑마늘이나 마늘 장아찌용으로 강력 추천합니다.) 2. **깐마늘 (바로 요리용 추천)**: 바쁜 우리 이웃님들을 위해 제가 직접 하나하나 정성껏 깐 신선한 깐마늘입니다. 받으셔서 바로 요리에 사용하시면 됩니다. (깨끗하게 세척 후 물기를 제거한 뽀얀 깐마늘이 소쿠리에 담겨있는 사진) *   **깐마늘 (1kg):** 15,000원 *   **깐마늘 (3kg):** 42,000원 (3천원 할인!) *   **깐마늘 (5kg):** 68,000원 (7천원 할인!) **# 배송 안내** *   배송비는 4,000원이며, 7만 원 이상 구매 시 무료로 배송해 드립니다. *   평일 오후 2시 이전 주문 및 입금 확인 건에 한해 당일 발송을 원칙으로 하며, 로젠택배를 통해 보내드립니다. (보통 1~2일 소요) **<주문 방법>** 전화 주문이 어려우신 분들은 아래 양식에 맞춰 **문자 메시지**를 보내주시면 제가 농사일 마치는 대로 순차적으로 확인하고 연락드리겠습니다. 1. **문자 주문:** 010-1234-5678 (농부 MJS) 2. **문자 주문 양식:** *   주문자 성함: *   연락처: *   받으실 주소: *   주문 상품 및 수량: (예: 상품 통마늘 1접, 깐마늘 1kg) 3. **입금 계좌:** 농협 / 302-0123-4567-89 (예금주: MJS) **# 입금 확인 후 주문이 완료됩니다. 반드시 주문자 성함으로 입금 부탁드립니다.** 1년 내내 흙과 함께하며 정직한 땀으로 키워낸 제 자식 같은 마늘입니다. 저희 가족이 먹는다는 마음으로, 최고의 마늘만을 보내드리겠습니다. 한번 맛보시면 왜 다들 의성마늘, 의성마늘 하는지 바로 아실 겁니다. 항상 저희 MJS 농가를 믿고 찾아주시는 모든 분께 진심으로 감사드립니다. 올해도 맛있는 마늘 드시고 온 가족 모두 건강하시길 바랍니다. 궁금한 점이 있으시면 언제든 편하게 연락 주세요. 밭에 있을 때는 전화를 바로 받기 어려울 수 있으니, 문자를 남겨주시면 가장 빠르게 답변 드릴 수 있습니다. 감사합니다. - 의성 흙내음 가득 담아, 농부 MJS 올림 -"
                          }
                        ],
                        "role": "model"
                      },
                      "finishReason": "STOP",
                      "avgLogprobs": null
                    }
                  ],
                  "usageMetadata": {
                    "promptTokenCount": 104,
                    "candidatesTokenCount": 1588,
                    "totalTokenCount": 3689,
                    "promptTokensDetails": [
                      {
                        "modality": "TEXT",
                        "tokenCount": 104
                      }
                    ],
                    "candidatesTokensDetails": null
                  },
                  "modelVersion": "gemini-2.5-pro",
                  "responseId": "LsJfaMrTF5aGz7IPprCHqAo"
                }
              }
            }
          },
          "401": {
            "description": "인증 실패"
          },
          "500": {
            "description": "서버 오류"
          }
        }
      }
    },
    "/mail/send": {
      "post": {
        "tags": ["Email"],
        "summary": "메일 전송",
        "description": "HTML 또는 평문 메일을 지정된 수신자에게 전송합니다.",
        "requestBody": {
          "description": "메일 전송 요청",
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "to": {
                    "type": "string",
                    "description": "수신자 이메일 주소",
                    "example": "kimgusqls1@gmail.com"
                  },
                  "subject": {
                    "type": "string",
                    "description": "메일 제목",
                    "example": "문의 답변입니다"
                  },
                  "content": {
                    "type": "string",
                    "description": "메일 본문 (HTML 또는 텍스트)",
                    "example": "<p>안녕하세요! 메일 잘 받았습니다.</p>"
                  },
                  "html": {
                    "type": "boolean",
                    "description": "HTML 여부 (true일 경우 HTML로 처리)",
                    "example": true
                  }
                },
                "required": ["to", "subject", "content", "html"]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "메일 전송 성공",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "messageId": {
                      "type": "string",
                      "example": "<2103503259.1.1751025106807@DESKTOP-92GP1I6>"
                    },
                    "error": {
                      "type": "string",
                      "example": null
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "요청이 잘못된 경우"
          },
          "500": {
            "description": "메일 전송 중 서버 오류 발생"
          }
        }
      }
    }
  },
  "components": {
    "securitySchemes": {
      "bearerAuth": {
        "type": "http",
        "scheme": "bearer",
        "bearerFormat": "JWT"
      }
    },
    "schemas": {
      "ClientNaverBlogRequestDTO": {
        "type": "object",
        "properties": {
          "contentsType": {
            "type": "string",
            "description": "글의 목적 - 예: 일상 공유, 상품 홍보 등",
            "example": "상품 홍보"
          },
          "item": {
            "type": "string",
            "description": "판매 농작물 - 예: 의성마늘, 토마토 등",
            "example": "의성마늘"
          },
          "extraPrompt": {
            "type": "string",
            "description": "게시 플랫폼 타입 - 예: NAVER_BLOG, INSTAGRAM 등",
            "example": "NAVER_BLOG"
          },
        },
        "required": ["contentsType", "item", "extraPrompt"]
      },
      "GeminiResponse": {
        "type": "object",
        "description": "Gemini 모델의 원시 응답",
        "properties": {
          "candidates": {
            "type": "array",
            "description": "생성된 후보 결과 목록",
            "items": {
              "type": "object",
              "properties": {
                "content": {
                  "type": "object",
                  "properties": {
                    "parts": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "text": {
                            "type": "string",
                            "description": "생성된 블로그 본문 전체 텍스트====================================================="
                          }
                        },
                        "required": ["text"]
                      }
                    },
                    "role": {
                      "type": "string",
                      "example": "model"
                    }
                  },
                  "required": ["parts", "role"]
                },
                "finishReason": {
                  "type": "string",
                  "example": "STOP"
                },
                "avgLogprobs": {
                  "type": ["number", "null"],
                  "nullable": true
                }
              },
              "required": ["content"]
            }
          },
          "usageMetadata": {
            "type": "object",
            "properties": {
              "promptTokenCount": {
                "type": "integer",
                "example": 104
              },
              "candidatesTokenCount": {
                "type": "integer",
                "example": 1353
              },
              "totalTokenCount": {
                "type": "integer",
                "example": 3421
              },
              "promptTokensDetails": {
                "type": "array",
                "items": {
                  "type": "object",
                  "properties": {
                    "modality": {
                      "type": "string",
                      "example": "TEXT"
                    },
                    "tokenCount": {
                      "type": "integer",
                      "example": 104
                    }
                  }
                }
              },
              "candidatesTokensDetails": {
                "type": ["array", "null"],
                "nullable": true
              }
            }
          },
          "modelVersion": {
            "type": "string",
            "example": "gemini-2.5-pro"
          },
          "responseId": {
            "type": "string",
            "example": "Pm9faI26IoCMjMcP-6bogQo"
          }
        },
        "required": ["candidates", "usageMetadata", "modelVersion", "responseId"]
      }
    }
  }
}
