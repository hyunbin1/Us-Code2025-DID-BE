{
  "openapi": "3.0.1",
  "info": {
    "title": "AI Gemini API",
    "version": "v1.0.0",
    "description": "Gemini 기반 텍스트 생성 기능을 제공하는 AI API입니다. 사용자가 질문을 입력하면, Google Gemini 모델을 통해 자연어로 답변을 생성합니다."
  },
  "servers": [
    {
      "url": "http://104.197.55.199:8080/api/v1"
    }
  ],
  "tags": [
    {
      "name": "AI-Gemini",
      "description": "Google Gemini 기반 텍스트 생성 API"
    },
    {
      "name": "Email",
      "description": "Email 관련 API"
    },
    {
      "name": "Naver Blog",
      "description": "네이버 블로그 자동화 관련 API"
    }
  ],
  "paths": {
    "/plans": {
      "post": {
        "tags": ["Naver Blog"],
        "summary": "블로그 글 아이디어 생성",
        "description": "Gemini API를 활용하여 사용자의 입력을 바탕으로 블로그 제목과 요약(계획)을 생성합니다.",
        "requestBody": {
          "description": "블로그 계획 생성을 위한 정보",
          "required": true,
          "content": {
            "application/json": {
              "schema": {
              },
              "example": {
                "contentsType": "상품 홍보",
                "count": 4,
                "item": "의성마늘",
                "type": "NAVER_BLOG",
                "keywords": ["의성", "마늘", "생산량"]
              }
            }
          }
        },
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "생성된 블로그 계획 리스트",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                  }
                },
                "example": [
                  {
                    "title": "MJS농부입니다 의성 흙내음 가득한 마늘밭을 소개합니다",
                    "summary": "한평생 의성에서 마늘 농사만 지어온 MJS농부입니다...",
                    "conceptTitle": "일 년의 기다림, 2024년 햇마늘 수확 현장"
                  }
                ]
              }
            }
          },
          "401": {
            "description": "인증 실패"
          },
          "500": {
            "description": "서버 오류"
          }
        }
      },
      "get": {
        "tags": ["Naver Blog"],
        "summary": "내 블로그 계획 전체 조회",
        "description": "현재 로그인한 사용자가 생성한 모든 블로그 글 계획(제목, 요약, 상태 등)을 조회합니다.",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "블로그 계획 조회 성공",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                  }
                }
              }
            }
          },
          "401": {
            "description": "인증 실패"
          }
        }
      }
    },
      "/naver-blog": {
      "post": {
        "tags": ["Naver Blog"],
        "summary": "네이버 블로그 자동 작성",
        "description": "사용자가 입력한 정보를 바탕으로 Gemini API를 통해 네이버 블로그 형식의 글을 생성합니다.",
        "requestBody": {
          "description": "블로그 생성을 위한 주제 및 추가 정보",
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ClientNaverBlogRequestDTO"
              }
            }
          }
        },
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "블로그 글 작성 성공",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/GeminiResponse"
                }
              }
            }
          },
          "401": {
            "description": "인증 실패"
          },
          "500": {
            "description": "서버 오류"
          }
        }
      }
    },
    "/mail/send": {
      "post": {
        "tags": ["Email"],
        "summary": "메일 전송",
        "description": "HTML 또는 평문 메일을 지정된 수신자에게 전송합니다.",
        "requestBody": {
          "description": "메일 전송 요청",
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "to": {
                    "type": "string",
                    "description": "수신자 이메일 주소",
                    "example": "kimgusqls1@gmail.com"
                  },
                  "subject": {
                    "type": "string",
                    "description": "메일 제목",
                    "example": "문의 답변입니다"
                  },
                  "content": {
                    "type": "string",
                    "description": "메일 본문 (HTML 또는 텍스트)",
                    "example": "<p>안녕하세요! 메일 잘 받았습니다.</p>"
                  },
                  "html": {
                    "type": "boolean",
                    "description": "HTML 여부 (true일 경우 HTML로 처리)",
                    "example": true
                  }
                },
                "required": ["to", "subject", "content", "html"]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "메일 전송 성공",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "messageId": {
                      "type": "string",
                      "example": "<2103503259.1.1751025106807@DESKTOP-92GP1I6>"
                    },
                    "error": {
                      "type": "string",
                      "example": null
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "요청이 잘못된 경우"
          },
          "500": {
            "description": "메일 전송 중 서버 오류 발생"
          }
        }
      }
    }
  },
  "components": {
    "securitySchemes": {
      "bearerAuth": {
        "type": "http",
        "scheme": "bearer",
        "bearerFormat": "JWT"
      }
    },
    "schemas": {
      "ClientNaverBlogRequestDTO": {
        "type": "object",
        "properties": {
          "contentsType": {
            "type": "string",
            "description": "글의 목적 - 예: 일상 공유, 상품 홍보 등",
            "example": "상품 홍보"
          },
          "count": {
            "type": "integer",
            "description": "생성할 블로그 글의 개수",
            "example": 4
          },
          "item": {
            "type": "string",
            "description": "판매 농작물 - 예: 의성마늘, 토마토 등",
            "example": "의성마늘"
          },
          "type": {
            "type": "string",
            "description": "게시 플랫폼 타입 - 예: NAVER_BLOG, INSTAGRAM 등",
            "example": "NAVER_BLOG"
          },
          "keywords": {
            "type": "array",
            "description": "글 생성 시 강조할 키워드 목록",
            "items": {
              "type": "string"
            },
            "example": ["의성", "마늘", "생산량"]
          }
        },
        "required": ["contentsType", "count", "item", "type", "keywords"]
      },
      "GeminiResponse": {
        "type": "object",
        "description": "Gemini 모델의 원시 응답",
        "properties": {
          "candidates": {
            "type": "array",
            "description": "생성된 후보 결과 목록",
            "items": {
              "type": "object",
              "properties": {
                "content": {
                  "type": "object",
                  "properties": {
                    "parts": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "text": {
                            "type": "string",
                            "description": "생성된 블로그 본문 전체 텍스트====================================================="
                          }
                        },
                        "required": ["text"]
                      }
                    },
                    "role": {
                      "type": "string",
                      "example": "model"
                    }
                  },
                  "required": ["parts", "role"]
                },
                "finishReason": {
                  "type": "string",
                  "example": "STOP"
                },
                "avgLogprobs": {
                  "type": ["number", "null"],
                  "nullable": true
                }
              },
              "required": ["content"]
            }
          },
          "usageMetadata": {
            "type": "object",
            "properties": {
              "promptTokenCount": {
                "type": "integer",
                "example": 104
              },
              "candidatesTokenCount": {
                "type": "integer",
                "example": 1353
              },
              "totalTokenCount": {
                "type": "integer",
                "example": 3421
              },
              "promptTokensDetails": {
                "type": "array",
                "items": {
                  "type": "object",
                  "properties": {
                    "modality": {
                      "type": "string",
                      "example": "TEXT"
                    },
                    "tokenCount": {
                      "type": "integer",
                      "example": 104
                    }
                  }
                }
              },
              "candidatesTokensDetails": {
                "type": ["array", "null"],
                "nullable": true
              }
            }
          },
          "modelVersion": {
            "type": "string",
            "example": "gemini-2.5-pro"
          },
          "responseId": {
            "type": "string",
            "example": "Pm9faI26IoCMjMcP-6bogQo"
          }
        },
        "required": ["candidates", "usageMetadata", "modelVersion", "responseId"]
      }
    }
  }
}
